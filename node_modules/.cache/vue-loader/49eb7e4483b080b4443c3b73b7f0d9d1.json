{"remainingRequest":"/Users/cjg/Vue/pxadmin/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!/Users/cjg/Vue/pxadmin/src/views/dashboard/manage/Plug.vue?vue&type=style&index=0&id=62dce8f3&scoped=true&lang=less&","dependencies":[{"path":"/Users/cjg/Vue/pxadmin/src/views/dashboard/manage/Plug.vue","mtime":1622368380823},{"path":"/Users/cjg/Vue/pxadmin/node_modules/_css-loader@1.0.1@css-loader/index.js","mtime":499162500000},{"path":"/Users/cjg/Vue/pxadmin/node_modules/_vue-loader@15.9.6@vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/cjg/Vue/pxadmin/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/cjg/Vue/pxadmin/node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js","mtime":1620475533881},{"path":"/Users/cjg/Vue/pxadmin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cjg/Vue/pxadmin/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.dltbtn{\n  color: red;\n}\n.custom-panel{\n  margin-top: 20px;\n}\n.custom-tools__info{\n  color: rgba(16, 16, 16, 100);\n  font-size: 18px;\n  text-align: left;\n  margin-top: 10px;\n}\n.custom-tools__content{\n  background-color: #fff;\n  margin-top: 10px;\n  padding: 10px 20px;\n}\n.table-head{\n  display: flex;\n  margin-top: 10px;\n  justify-content: space-between;\n}\n",{"version":3,"sources":["Plug.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Plug.vue","sourceRoot":"src/views/dashboard/manage","sourcesContent":["<template>\n    <CustomLayout >\n    <div class=\"custom-body\">\n      <div>\n        <CommonTitle title=\"插件配置\"></CommonTitle>\n      </div>\n      <div class=\"custom-tools\">\n        <div class=\"table-head\">\n            <div class=\"custom-tools__info\">基础信息</div>\n            <el-button type=\"primary\" icon=\"el-icon-plus\" size=\"mini\"\n                        @click=\"handleAdd\">修改</el-button>\n        </div>\n        <div class=\"custom-tools__content\">\n          <el-form :model=\"form\"\n                 :inline=\"true\"\n                 @submit.native.prevent=\"\"\n                 class=\"table-form bg-gray\"\n                 label-width=\"130px\">\n          <el-row>\n             <el-form-item label=\"pluginPath：\">\n              <el-input v-model=\"form.title\"\n                        clearable\n                        placeholder=\"请输入\"></el-input>\n            </el-form-item>\n              \n          </el-row>\n        </el-form>\n        </div>\n      </div>\n      <div class=\"table-head\">\n        <div class=\"custom-tools__info\">插件组</div>\n        <el-button type=\"primary\" icon=\"el-icon-plus\" size=\"mini\"\n                     @click=\"handleAdd\">新增</el-button>\n      </div>\n      <div class=\"custom-panel\">\n        <el-table v-loading=\"loading\"\n                  size=\"normal\"\n                  :data=\"tableData\"\n                  :empty-text=\"emptText\"\n                  row-class-name=\"custom-table-tr--hover\"\n                  header-row-class-name=\"custom-table-header\"\n                  @selection-change=\"handleSelectionChange\"\n                  style=\"width: 100%\">\n          <el-table-column \n                           class-name=\"custom-popper--overflow\"\n                           label=\"名称\">\n            <template slot-scope=\"scope\">\n              <el-tooltip effect=\"dark\"\n                          :content=\"scope.row.areaName\"\n                          :open-delay=\"1000\"\n                          placement=\"top\">\n                <span>{{scope.row.areaName}}</span>\n              </el-tooltip>\n            </template>\n          </el-table-column>\n          <el-table-column class-name=\"custom-popper--overflow\"\n                           label=\"插件\">\n            <template slot-scope=\"scope\">\n              <el-tooltip effect=\"dark\"\n                          :content=\"scope.row.title\"\n                          :open-delay=\"1000\"\n                          placement=\"top\">\n                <span>{{scope.row.title}}</span>\n              </el-tooltip>\n            </template>\n          </el-table-column>\n          <el-table-column \n                           prop=\"source\"\n                           label=\"插件名称\">\n          </el-table-column>\n          <el-table-column\n                           prop=\"creatTime\"\n                           label=\"XXX\">\n          </el-table-column>\n          <el-table-column\n                           label=\"操作\">\n            <template slot-scope=\"scope\">\n\n              <el-button type=\"text\"\n                         @click=\"handleLook(scope.row)\">查看</el-button>\n              <el-button type=\"text\" class=\"dltbtn\"\n                         @click=\"deleteRow(scope.row)\">删除</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n\n        <div class=\"custom-pagination\"\n             style=\"float:right\">\n          \n          <div style=\"display: flex;\">\n            <div>\n              总共<span>{{ pagination.total }}</span>条记录<i class=\"custom-pagination__interval\"></i>每页显示\n              <el-select v-model=\"pagination.pageSize\"\n                         placeholder=\"请选择\"\n                         style=\"width:70px;\">\n                <el-option v-for=\"item in pagination.pageSizes\"\n                           :key=\"item\"\n                           :label=\"item\"\n                           :value=\"item\">\n                </el-option>\n              </el-select>\n              条记录\n            </div>\n            <el-pagination :current-page.sync=\"pagination.pageIndex\"\n                           :page-size.sync=\"pagination.pageSize\"\n                           layout=\"prev, pager, next\"\n                           :total=\"pagination.total\">\n            </el-pagination>\n          </div>\n        </div>\n      </div>\n    </div>\n    <el-dialog\n                title=\"新增\"\n                :visible.sync=\"dialogVisible\"\n                v-if=\"dialogVisible\"\n                width=\"640px\"\n                :before-close=\"handleClose\">\n            <div class=\"dialog_main\">\n                <el-row :gutter=\"22\">\n                    <el-col :span=\"12\">\n                        <div class=\"dialog_item\">\n                            <div class=\"item_label\"> 名称：</div>\n                            <div class=\"item_value\" style=\"width:100%;\">\n                                <el-input\n                                        size=\"small\"\n                                        placeholder=\"名称\"\n                                        v-model=\"chooseRow.groupName\"\n                                        clearable>\n                                </el-input>\n                            </div>\n                        </div>\n                    </el-col>\n                    <!-- <el-col :span=\"12\">\n                        <div class=\"dialog_item\">\n                            <div class=\"item_label\">类型：</div>\n                            <div class=\"item_value\" style=\"width:100%;\">\n                                <el-input\n                                        size=\"small\"\n                                        placeholder=\"类型\"\n                                        v-model=\"chooseRow.type\"\n                                        clearable>\n                                </el-input>\n                            </div>\n                        </div>\n                    </el-col> -->\n                </el-row>\n            </div>\n            <span slot=\"footer\" class=\"dialog-footer\">\n                <el-button size=\"mini\" @click=\"handleClose\">取 消</el-button>\n                <el-button type=\"primary\"  size=\"mini\" @click=\"makeSure\">确 定</el-button>\n            </span>\n        </el-dialog>\n  </CustomLayout>\n</template>\n\n<script>\nimport CommonTitle from '@/components/common/CommonTitle'\nimport CustomLayout from '@/components/common/CustomLayout.vue'\nexport default {\n  name: '',\n  components:{\n    CommonTitle,\n    CustomLayout\n  },\n  data () {\n    return {\n      form:{\n\n      },\n      dialogVisible:false,\n      chooseRow:{\n        timeout:'',\n        description:'',\n        type:'',\n        path:''\n      },\n      pagination: { // 分页字段\n        pageIndex: 1, // 当前页\n        pageSize: 20, // 每页显示多少条\n        total: 0, // 总条数\n        pageSizes: [20, 50, 100]\n      },\n      tableData: [], // table列表数据\n      loading: false,\n      tableHeight: window.document.documentElement.clientHeight - 248, // table高度\n      multipleSelection: [], // 多选时，已选项\n      currentRow: {}, // 当前选中行\n      areaDialogVisible: false, // 是否显示行政区划弹窗\n      emptText: '暂无数据', // table数据为空的提示语\n      isSizeInit: false, // 是否是页面初始化时设置的PageSize\n      previewDialogVisible: false, // 是否显示行政区划弹窗\n      currentTemplate: {},//当前选中的模板\n    }\n  },\n  mounted(){\n    this.getPluginList()\n     //获取 Resource 详情\n    this.getResourceDetail()\n  },\n  methods: {\n    handleSelectionChange(val) {\n      this.multipleSelection = val\n    },\n    getResourceDetail() {\n      this.$get('/config/api/plugin_group/detail')\n        .then((res) => {\n          if (res.code == 10001) {\n              let data = JSON.parse(res.data)\n              console.log(data)\n          } else {\n            \n          }\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n    handleAdd() {\n\n    },\n    //映射服务列表\n    getPluginList() {\n      this.$get('/config/api/plugin_group/list', {\n        name: \"group1\"\n      })\n        .then((res) => {\n          if (res.code == 10001) {\n             this.tableData = JSON.parse(res.data)\n          } else {\n            \n          }\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n    makeSure() {\n      let formData = new FormData();\n      formData.append('groupName', this.chooseRow.groupName);\n      let obj = [{  \n        name: \"rate limit\",\n        version: \"0.0.1\",\n        priority: 1000,\n        externalLookupName: \"ExternalPluginRateLimit\"\n      }]\n      formData.append('plugins', JSON.stringify(obj));\n      let mobj = []\n      formData.append('methods', null);\n      this.$post('/config/api/plugin_group', formData)\n        .then((res) => {\n          if (res.code == 10001) {\n            this.dialogVisible = false\n            this.getPluginList()\n            console.log(res)\n          } else {\n            \n          }\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n    //删除\n    deleteRow() {\n      this.$post('/config/api/plugin_group', {\n        name: 'group1'\n      })\n        .then((res) => {\n          if (res.code == 10001) {\n            this.$message({\n              type: 'success',\n              message: '删除成功！',\n            })\n            this.getPluginList()\n            console.log(res)\n          } else {\n            \n          }\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n  }\n}\n</script>\n\n\n<style scoped lang=\"less\">\n.dltbtn{\n  color: red;\n}\n.custom-panel{\n  margin-top: 20px;\n}\n.custom-tools__info{\n  color: rgba(16, 16, 16, 100);\n  font-size: 18px;\n  text-align: left;\n  margin-top: 10px;\n}\n.custom-tools__content{\n  background-color: #fff;\n  margin-top: 10px;\n  padding: 10px 20px;\n}\n.table-head{\n  display: flex;\n  margin-top: 10px;\n  justify-content: space-between;\n}\n</style>\n"]}]}