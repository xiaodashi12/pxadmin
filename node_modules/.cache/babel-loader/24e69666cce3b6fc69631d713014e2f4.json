{"remainingRequest":"/Users/cjg/Vue/pxadmin/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!/Users/cjg/Vue/pxadmin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js??ref--0-0!/Users/cjg/Vue/pxadmin/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!/Users/cjg/Vue/pxadmin/src/components/CustomMenu.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cjg/Vue/pxadmin/src/components/CustomMenu.vue","mtime":1620552893301},{"path":"/Users/cjg/Vue/pxadmin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cjg/Vue/pxadmin/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/cjg/Vue/pxadmin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cjg/Vue/pxadmin/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.map\";\nimport \"core-js/modules/es6.array.find\";\nimport _defineProperty from \"/Users/cjg/Vue/pxadmin/node_modules/_@babel_runtime-corejs2@7.14.0@@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getLocationSearchObj } from '@/utils/common.js';\nimport { mapMutations, mapGetters } from 'vuex';\nimport { clearLocalStorage } from '@/utils/auth.js';\n\nvar debounce = require('lodash/debounce');\n\nimport { menuList } from '@/api/menu-config.js';\nexport default {\n  name: 'CustomMenu',\n  data: function data() {\n    return {\n      defaultActive: '',\n      // 激活菜单项index值\n      menuList: menuList,\n      // 菜单列表\n      searchList: [],\n      // 搜索到的菜单列表(子菜单)\n      keyWord: '',\n      // 搜索关键字\n      searchBox: false,\n      // 搜索内容区域，显示隐藏\n      fromType: true // true:显示原有内容， false:隐藏部分内容 是否嵌入到其他项目中，需要对应隐藏部分内容(菜单，header)\n\n    };\n  },\n  watch: {\n    keyWord: function keyWord(val) {\n      if (val !== '' && val !== undefined) {\n        this.searchBox = true;\n        this.handleSearch();\n      } else {\n        this.searchBox = false;\n      }\n    }\n  },\n  methods: _objectSpread(_objectSpread({}, mapMutations(['setOrgId', 'setCurrentMenu'])), {}, {\n    // 清除分页信息\n    clearPagination: function clearPagination() {\n      clearLocalStorage('picTxtIdx');\n      clearLocalStorage('picTxtSize');\n    },\n    // 搜索过滤菜单内容\n    handleSearch: debounce(function () {\n      var _this = this;\n\n      this.$get('/menu/search', {\n        keyWord: this.keyWord\n      }).then(function (res) {\n        if (res.code === 200) {\n          _this.searchList = res.data;\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }, 200),\n    // 点击搜索后的菜单，滚动定位到已选项\n    handleScrollPosition: function handleScrollPosition() {\n      var el = document.querySelector('.custom-menu-container');\n      var top = el.scrollTop;\n      var current = document.querySelector(\"[data-index=\".concat(this.defaultActive, \"]\"));\n      var y = current.getBoundingClientRect().y;\n      top = top + y - 60 - 56;\n      el.scrollTop = top;\n    },\n    // 搜索菜单项点击\n    handleSearchMenuClick: function handleSearchMenuClick(item) {\n      var _this2 = this;\n\n      this.keyWord = '';\n      this.searchBox = false;\n      this.searchList = [];\n      this.setCurrentMenu(item);\n      this.handleMenuClick(item);\n      this.defaultActive = item.index;\n      setTimeout(function () {\n        _this2.handleScrollPosition();\n      }, 300);\n    },\n    // 切换页面路由\n    switchRouter: function switchRouter(item) {\n      this.setCurrentMenu(item);\n      this.clearPagination();\n      this.$router.push({\n        path: item.componentName,\n        query: {\n          id: new Date().getTime()\n        }\n      });\n      var el = document.querySelector('.page-content .el-scrollbar__wrap');\n\n      if (el) {\n        el.scrollTop = 0;\n      }\n    },\n    // 点击菜单项\n    handleMenuClick: function handleMenuClick(item) {\n      this.switchRouter(item);\n    },\n    // 菜单栏展开\n    handleOpen: function handleOpen(key, keyPath) {// console.log(key, keyPath)\n    },\n    // 菜单栏收起\n    handleClose: function handleClose(key, keyPath) {// console.log(key, keyPath)\n    },\n    // 初始化菜单列表\n    initMenu: function initMenu() {\n      var _this3 = this;\n\n      // 0:默认框架页内加载(左侧菜单栏也需要对应)，1外部工具打开(第三方应用程序)，\n      // 2新窗口打开，3覆盖本窗口打开, 4云听后台的内容嵌入，(需要先登录,暂已改成默认管理员登录)\n      // 5 提示暂未开通 6应用中路由跳转\n      console.log(this.menuList);\n      var findShow = this.menuList.find(function (item) {\n        return item.children.length > 0;\n      });\n\n      if (findShow) {\n        this.initDefaultActive();\n      } else {// this.$router.push({\n        //   path:'/403'\n        // })\n      }\n\n      return; // var type = current.openType\n\n      this.$get('/menu/getMenuList').then(function (res) {\n        if (res.code === 200 && res.data && res.data.length > 0) {\n          _this3.menuList = res.data;\n\n          var _findShow = _this3.menuList.find(function (item) {\n            return item.children.length > 0;\n          });\n\n          if (_findShow) {\n            _this3.initDefaultActive();\n          } else {\n            _this3.$router.push({\n              path: '/403'\n            });\n          }\n        } else {\n          _this3.$router.push({\n            path: '/403'\n          }); // this.$message.error(res.msg)\n\n        }\n      }).catch(function (err) {\n        console.log(err);\n      });\n    },\n    // 设置激活的菜单项\n    initDefaultActive: function initDefaultActive() {\n      var index, current; // 如果设置了激活某一项，则优先激活显示某个路由\n\n      var params = getLocationSearchObj();\n\n      if (params.menuId !== undefined) {\n        var list = this.menuList;\n        list = list.map(function (item) {\n          return [item].concat(item.children);\n        });\n        list = list.flat(Infinity);\n        current = list.find(function (item) {\n          return item.id == params.menuId;\n        });\n        index = current.id;\n      } else {\n        // 使用第一个菜单项，如果有子菜单，则用子菜单的第一激活\n        for (var i = 0; i < this.menuList.length; i++) {\n          var item = this.menuList[i];\n\n          if (item.children && item.children.length > 0) {\n            current = item.children[0];\n            index = current.id;\n            break;\n          }\n        }\n      }\n\n      if (current) {\n        this.defaultActive = index;\n        this.switchRouter(current);\n      }\n    },\n    init: function init() {\n      var params = getLocationSearchObj();\n      this.fromType = params.from == 1 ? false : true; // 判断是否隐藏左侧菜单 true是不隐藏 false的隐藏\n    }\n  }),\n  created: function created() {\n    this.initMenu();\n    this.init();\n  }\n};",{"version":3,"sources":["CustomMenu.vue"],"names":[],"mappings":"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","sourcesContent":["<!--\r\n * @Description: 子应用菜单栏列表\r\n * @Author: jiangyihong\r\n * @Date: 2020-07-22 17:24:13\r\n * @LastEditors: jiangyihong\r\n-->\r\n<template>\r\n  <div class=\"custom-menu\" v-if=\"fromType\">\r\n    <!-- <div class=\"menu-title\">内容管理</div>\r\n    <div class=\"menu-search\">\r\n      <el-input\r\n        placeholder=\"搜索\"\r\n        v-model=\"keyWord\">\r\n        <i slot=\"suffix\" class=\"el-input__icon el-icon-search\"></i>\r\n      </el-input>\r\n      <div class=\"menu-search-container\" v-show=\"searchBox\">\r\n        <div class=\"menu-search-item\" v-for=\"item in searchList\"\r\n         :key=\"item.id\" @click=\"handleSearchMenuClick(item)\">{{item.title}}</div>\r\n        <div class=\"menu-search--empty\" v-show=\"searchList.length == 0\">暂无数据</div>\r\n      </div>\r\n    </div> -->\r\n    <el-menu\r\n      :default-active=\"defaultActive\"\r\n      class=\"custom-menu-container\"\r\n      @open=\"handleOpen\"\r\n      @close=\"handleClose\">\r\n      <div v-for=\"(item, index) in menuList\" :key=\"index\">\r\n        <el-submenu v-if=\"item.children.length >= 0\" :index=\"item.id\">\r\n          <template slot=\"title\">{{item.name}}</template>\r\n          <el-menu-item :index=\"String(child.id)\" @click=\"handleMenuClick(child)\"\r\n            :data-index=\"child.id\"\r\n            v-for=\"(child, childIdx) in item.children\"\r\n            :key=\"childIdx\">{{child.name}}</el-menu-item>\r\n        </el-submenu>\r\n        <!-- <el-menu-item v-if=\"item.children.length === 0\"\r\n          :index=\"item.index\"\r\n          :data-index=\"item.index\"\r\n          @click=\"handleMenuClick(item)\">{{item.title}}</el-menu-item> -->\r\n      </div>\r\n    </el-menu>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {getLocationSearchObj} from '@/utils/common.js'\r\nimport {mapMutations, mapGetters} from 'vuex'\r\nimport {clearLocalStorage} from '@/utils/auth.js'\r\nconst debounce = require('lodash/debounce')\r\nimport {menuList} from '@/api/menu-config.js'\r\nexport default {\r\n  name: 'CustomMenu',\r\n  data () {\r\n    return {\r\n      defaultActive: '', // 激活菜单项index值\r\n      menuList: menuList, // 菜单列表\r\n      searchList: [], // 搜索到的菜单列表(子菜单)\r\n      keyWord: '', // 搜索关键字\r\n      searchBox: false, // 搜索内容区域，显示隐藏\r\n      fromType: true, // true:显示原有内容， false:隐藏部分内容 是否嵌入到其他项目中，需要对应隐藏部分内容(菜单，header)\r\n    }\r\n  },\r\n  watch: {\r\n    keyWord (val) {\r\n      if (val !== '' && val !== undefined) {\r\n        this.searchBox = true\r\n        this.handleSearch()\r\n      } else {\r\n        this.searchBox = false\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapMutations(['setOrgId', 'setCurrentMenu']),\r\n    // 清除分页信息\r\n    clearPagination () {\r\n      clearLocalStorage('picTxtIdx')\r\n      clearLocalStorage('picTxtSize')\r\n    },\r\n    // 搜索过滤菜单内容\r\n    handleSearch: debounce(function () {\r\n      this.$get('/menu/search', {\r\n        keyWord: this.keyWord\r\n      }).then(res => {\r\n        if (res.code === 200) {\r\n          this.searchList = res.data\r\n        }\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n    }, 200),\r\n    // 点击搜索后的菜单，滚动定位到已选项\r\n    handleScrollPosition () {\r\n      let el = document.querySelector('.custom-menu-container')\r\n      let top = el.scrollTop\r\n      let current = document.querySelector(`[data-index=${this.defaultActive}]`)\r\n      let y = current.getBoundingClientRect().y\r\n      top = top + y - 60 - 56\r\n      el.scrollTop = top\r\n    },\r\n    // 搜索菜单项点击\r\n    handleSearchMenuClick (item) {\r\n      this.keyWord = ''\r\n      this.searchBox = false\r\n      this.searchList = []\r\n      this.setCurrentMenu(item)\r\n      this.handleMenuClick(item)\r\n      this.defaultActive = item.index\r\n      setTimeout(() => {\r\n        this.handleScrollPosition()\r\n      }, 300)\r\n    },\r\n    // 切换页面路由\r\n    switchRouter (item) {\r\n      this.setCurrentMenu(item)\r\n      this.clearPagination()\r\n      this.$router.push({\r\n        path: item.componentName,\r\n        query: {\r\n          id: new Date().getTime()\r\n        }\r\n      })\r\n      let el = document.querySelector('.page-content .el-scrollbar__wrap')\r\n      if (el) {\r\n        el.scrollTop = 0\r\n      }\r\n    },\r\n    // 点击菜单项\r\n    handleMenuClick (item) {\r\n      this.switchRouter(item)\r\n    },\r\n    // 菜单栏展开\r\n    handleOpen(key, keyPath) {\r\n      // console.log(key, keyPath)\r\n    },\r\n    // 菜单栏收起\r\n    handleClose(key, keyPath) {\r\n      // console.log(key, keyPath)\r\n    },\r\n    // 初始化菜单列表\r\n    initMenu () {\r\n      // 0:默认框架页内加载(左侧菜单栏也需要对应)，1外部工具打开(第三方应用程序)，\r\n      // 2新窗口打开，3覆盖本窗口打开, 4云听后台的内容嵌入，(需要先登录,暂已改成默认管理员登录)\r\n      // 5 提示暂未开通 6应用中路由跳转\r\n      console.log(this.menuList)\r\n      let findShow = this.menuList.find(item => item.children.length>0)\r\n      if(findShow){\r\n        this.initDefaultActive()\r\n      }else{\r\n        // this.$router.push({\r\n        //   path:'/403'\r\n        // })\r\n      }\r\n      return;\r\n      // var type = current.openType\r\n      this.$get('/menu/getMenuList').then(res => {\r\n        if (res.code === 200 && res.data && res.data.length > 0) {\r\n          this.menuList = res.data\r\n          let findShow = this.menuList.find(item => item.children.length>0)\r\n          if(findShow){\r\n            this.initDefaultActive()\r\n          }else{\r\n            this.$router.push({\r\n              path:'/403'\r\n            })\r\n          }\r\n          \r\n        } else {\r\n          this.$router.push({\r\n            path:'/403'\r\n          })\r\n          // this.$message.error(res.msg)\r\n        }\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n    },\r\n    // 设置激活的菜单项\r\n    initDefaultActive () {\r\n      let index, current\r\n      // 如果设置了激活某一项，则优先激活显示某个路由\r\n      let params = getLocationSearchObj()\r\n      if (params.menuId !== undefined) {\r\n        let list = this.menuList\r\n        list = list.map(item => {\r\n          return [item].concat(item.children)\r\n        })\r\n        list = list.flat(Infinity)\r\n        current = list.find(item => item.id == params.menuId)\r\n        index = current.id\r\n      } else {\r\n        // 使用第一个菜单项，如果有子菜单，则用子菜单的第一激活\r\n        for (let i = 0; i < this.menuList.length; i++) {\r\n          let item = this.menuList[i]\r\n          if (item.children && item.children.length > 0) {\r\n            current = item.children[0]\r\n            index = current.id\r\n            break\r\n          }\r\n        }\r\n      }\r\n      if (current) {\r\n        this.defaultActive = index\r\n        this.switchRouter(current)\r\n      }\r\n    },\r\n    init() {\r\n      let params = getLocationSearchObj()\r\n      this.fromType = params.from == 1 ? false : true // 判断是否隐藏左侧菜单 true是不隐藏 false的隐藏\r\n    },\r\n  },\r\n  created () {\r\n    this.initMenu() \r\n    this.init()\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.custom-menu {\r\n  height: 100vh;\r\n}\r\n.menu-title {\r\n  height: 60px;\r\n  line-height: 60px;\r\n  font-size: 15px;\r\n  font-weight: 600;\r\n  color: #000000;\r\n  padding-left: 20px;\r\n  border-bottom: 1px solid #dcdfe6;\r\n  box-sizing: border-box;\r\n}\r\n.custom-menu-container {\r\n  height: calc(100% - 60px - 56px);\r\n  overflow-y: auto;\r\n  overflow-x: hidden;\r\n}\r\n.menu-search {\r\n  position: relative;\r\n  height: 56px;\r\n  padding: 12px 8px;\r\n  box-sizing: border-box;\r\n}\r\n.menu-search-container {\r\n  position: absolute;\r\n  top: 45px;\r\n  left: 8px;\r\n  width: 134px;\r\n  min-height: 178px;\r\n  max-height: 300px;\r\n  border-radius: 4px;\r\n  border: 1px solid #DCDFE6;\r\n  z-index: 200;\r\n  background: #FFF;\r\n  overflow-x: hidden;\r\n  overflow-y: auto;\r\n  box-sizing: border-box;\r\n}\r\n.menu-search-item {\r\n  height: 40px;\r\n  line-height: 40px;\r\n  padding-left: 30px;\r\n  min-width: auto;\r\n  cursor: pointer;\r\n  box-sizing: border-box;\r\n  &:hover {\r\n    background-color: #E6E6E6 !important;\r\n    color: #303133 !important;\r\n  }\r\n}\r\n.menu-search--empty {\r\n  text-align: center;\r\n  padding-top: 40px;\r\n  color: #909399;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components"}]}