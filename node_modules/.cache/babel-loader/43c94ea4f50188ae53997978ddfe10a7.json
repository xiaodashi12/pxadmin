{"remainingRequest":"/Users/cjg/Vue/pxadmin/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js!/Users/cjg/Vue/pxadmin/src/utils/dialogUtils.js","dependencies":[{"path":"/Users/cjg/Vue/pxadmin/src/utils/dialogUtils.js","mtime":1619401228523},{"path":"/Users/cjg/Vue/pxadmin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cjg/Vue/pxadmin/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.object.define-property\";\nimport \"core-js/modules/es6.object.define-properties\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.array.for-each\";\nimport \"core-js/modules/es6.array.filter\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"/Users/cjg/Vue/pxadmin/node_modules/_@babel_runtime-corejs2@7.14.0@@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { MessageBox } from \"element-ui\";\nimport store from \"../store/store\";\nimport { Loading } from 'element-ui';\nimport api from '@/api';\nimport fetch from '@/utils/fetch';\nimport { mapGetters, mapActions } from 'vuex';\nimport { JSEncrypt } from 'jsencrypt';\nexport function getSecuCode(password) {\n  var encrypt = new JSEncrypt();\n  encrypt.setPublicKey('MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCRRjobcdpzMY7UgRP4H/7936Ui09qQndfKkzpzmKzo1X30SGI6DDScYF0o8KdP/wK/AY92/V6LL1Fw0dneRd78J9QXT9vS8k3+32a2KP0K8MmBZME9LwORR9IvARpDzTmX5+c/KWjHnPpITHtCtzIodC/8c5kIHKbVcuj44ANRWQIDAQAB');\n  var data = encrypt.encrypt(password);\n  return data;\n}\nexport function loginTimeout() {\n  MessageBox.alert('登录信息已失效，请重新登录', '确定登出', {\n    confirmButtonText: '重新登录',\n    type: 'warning',\n    showCancelButton: false,\n    showClose: false\n  }).then(function () {\n    store.dispatch('FedLogOut').then(function () {\n      location.reload(); // 为了重新实例化vue-router对象 避免bug\n    });\n  }).catch(function (e) {\n    store.dispatch('FedLogOut').then(function () {\n      location.reload(); // 为了重新实例化vue-router对象 避免bug\n    });\n  });\n}\nexport var loadding = {\n  data: function data() {\n    return {\n      //loading显示文本\n      progressStr: '加载中，请稍候...'\n    };\n  },\n  methods: _objectSpread(_objectSpread({}, mapActions(['setCustomerInfo', 'setVehicleInfo'])), {}, {\n    /**打开loading\n     *@param progressStr 提示信息\n     * @param timeout 超时时间：单位毫秒，默认10000（10秒）\n     */\n    startLoading: function startLoading() {\n      var _this2 = this;\n\n      var progressStr = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var timeout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 10000;\n\n      // console.log(this,this.progressStr)\n      // debugger\n      if (progressStr != null) {\n        this.progressStr = progressStr;\n      }\n\n      this.loadingObj = Loading.service({\n        lock: true,\n        text: this.progressStr,\n        background: 'rgba(0, 0, 0, 0.7)'\n      }); //10秒后自动关闭\n\n      setTimeout(function () {\n        _this2.endLoading();\n      }, timeout);\n    },\n    //关闭结束loading\n    endLoading: function endLoading() {\n      if (this.loadingObj !== undefined && this.loadingObj !== null) {\n        this.loadingObj.close();\n      }\n    },\n    //设置loading字符串，如果有需要的话\n    setLoadingText: function setLoadingText(progressStr) {\n      console.log(this, this.progressStr, progressStr);\n\n      if (this.loadingObj !== undefined && this.loadingObj !== null) {\n        this.loadingObj.text = progressStr;\n      }\n    }\n  })\n};\nexport var updatePublic = {\n  computed: _objectSpread({}, mapGetters(['vehicleInfo', 'customerInfo'])),\n  methods: _objectSpread(_objectSpread({}, mapActions(['setCustomerInfo', 'setVehicleInfo'])), {}, {\n    getCarinfo: function getCarinfo(carInfo) {\n      return new Promise(function (resolve, reject) {\n        fetch({\n          url: api['getCarinfo'].url || '',\n          method: 'post',\n          data: _objectSpread({\n            method: api['getCarinfo'].method\n          }, carInfo)\n        }).then(function (res) {\n          resolve(res);\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    },\n    getUserInfo: function getUserInfo(userInfo, vehicle_code) {\n      var _this3 = this;\n\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n        fetch({\n          url: api['getUserInfo'].url || '',\n          method: 'post',\n          data: _objectSpread({\n            method: api['getUserInfo'].method\n          }, userInfo)\n        }).then(function (res) {\n          _this3.setCustomerInfo(res[0]);\n\n          if (vehicle_code) {\n            // debugger\n            _this3.getCarinfo({\n              vehicle_code: _this.vehicleInfo.vehicle_code,\n              vehicle_color: _this.vehicleInfo.vehicle_color,\n              cpu_card_id: _this.vehicleInfo.cpu_card_id\n            }).then(function (carInfo) {\n              if (carInfo.length > 0) {\n                _this3.setVehicleInfo(carInfo[0]);\n              }\n            }, function (error) {\n              _this3.$alert(error.message, '提示', {\n                dangerouslyUseHTMLString: true,\n                showClose: false,\n                confirmButtonText: '确定',\n                callback: function callback(action) {}\n              });\n            });\n          } else {\n            _this3.setVehicleInfo({});\n          }\n\n          resolve(res);\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    },\n    setPublicInfo: function setPublicInfo(params, cb) {\n      var _this4 = this;\n\n      if (!(params instanceof Object) || Object.keys(params).length == 0) return false;\n\n      if (params.vehicle_color || params.vehicle_code) {\n        this.getCarinfo(params).then(function (carInfo) {\n          if (carInfo.length > 0) {\n            _this4.setVehicleInfo(carInfo[0]);\n\n            cb && cb();\n          }\n\n          _this4.getUserInfo({\n            customer_id: carInfo[0].customer_id\n          }).then(function (res) {\n            if (res.length > 0) {\n              _this4.setCustomerInfo(res[0]);\n\n              cb && cb();\n            }\n          }, function (error) {\n            _this4.$alert(error.message, '提示', {\n              dangerouslyUseHTMLString: true,\n              showClose: false,\n              confirmButtonText: '确定',\n              callback: function callback(action) {}\n            });\n          });\n        }, function (error) {\n          _this4.$alert(error.message, '提示', {\n            dangerouslyUseHTMLString: true,\n            showClose: false,\n            confirmButtonText: '确定',\n            callback: function callback(action) {}\n          });\n        });\n      }\n    }\n  })\n};",{"version":3,"sources":["/Users/cjg/Vue/pxadmin/src/utils/dialogUtils.js"],"names":["MessageBox","store","Loading","api","fetch","mapGetters","mapActions","JSEncrypt","getSecuCode","password","encrypt","setPublicKey","data","loginTimeout","alert","confirmButtonText","type","showCancelButton","showClose","then","dispatch","location","reload","catch","e","loadding","progressStr","methods","startLoading","timeout","loadingObj","service","lock","text","background","setTimeout","endLoading","undefined","close","setLoadingText","console","log","updatePublic","computed","getCarinfo","carInfo","Promise","resolve","reject","url","method","res","error","getUserInfo","userInfo","vehicle_code","_this","setCustomerInfo","vehicleInfo","vehicle_color","cpu_card_id","length","setVehicleInfo","$alert","message","dangerouslyUseHTMLString","callback","action","setPublicInfo","params","cb","Object","keys","customer_id"],"mappings":"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","sourcesContent":["import {MessageBox} from \"element-ui\";\nimport store from '../store/store'\nimport {Loading} from 'element-ui';\nimport api from '@/api'\nimport fetch from '@/utils/fetch'\nimport {mapGetters, mapActions} from 'vuex'\nimport {JSEncrypt} from 'jsencrypt'\n\nexport function getSecuCode(password) {\n    let encrypt = new JSEncrypt();\n    encrypt.setPublicKey('MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCRRjobcdpzMY7UgRP4H/7936Ui09qQndfKkzpzmKzo1X30SGI6DDScYF0o8KdP/wK/AY92/V6LL1Fw0dneRd78J9QXT9vS8k3+32a2KP0K8MmBZME9LwORR9IvARpDzTmX5+c/KWjHnPpITHtCtzIodC/8c5kIHKbVcuj44ANRWQIDAQAB');\n\n    let data = encrypt.encrypt(password);\n    return data;\n}\n\nexport function loginTimeout() {\n    MessageBox.alert('登录信息已失效，请重新登录', '确定登出', {\n        confirmButtonText: '重新登录',\n        type: 'warning',\n        showCancelButton: false,\n        showClose: false\n    }).then(() => {\n        store.dispatch('FedLogOut').then(() => {\n            location.reload()// 为了重新实例化vue-router对象 避免bug\n        })\n    }).catch(e => {\n        store.dispatch('FedLogOut').then(() => {\n            location.reload()// 为了重新实例化vue-router对象 避免bug\n        })\n    })\n}\n\nexport const loadding = {\n    data() {\n        return {\n            //loading显示文本\n            progressStr: '加载中，请稍候...',\n        }\n    },\n    methods: {\n        ...mapActions([\n            'setCustomerInfo',\n            'setVehicleInfo'\n        ]),\n        /**打开loading\n         *@param progressStr 提示信息\n         * @param timeout 超时时间：单位毫秒，默认10000（10秒）\n         */\n        startLoading: function (progressStr = null, timeout = 10000) {\n            // console.log(this,this.progressStr)\n            // debugger\n            if (progressStr != null) {\n                this.progressStr = progressStr\n            }\n\n            this.loadingObj = Loading.service({\n                lock: true,\n                text: this.progressStr,\n                background: 'rgba(0, 0, 0, 0.7)'\n            })\n            //10秒后自动关闭\n            setTimeout(() => {\n                this.endLoading()\n            }, timeout)\n        },\n        //关闭结束loading\n        endLoading: function () {\n            if (this.loadingObj !== undefined && this.loadingObj !== null) {\n                this.loadingObj.close();\n            }\n        },\n        //设置loading字符串，如果有需要的话\n        setLoadingText: function (progressStr) {\n            console.log(this, this.progressStr, progressStr)\n            if (this.loadingObj !== undefined && this.loadingObj !== null) {\n                this.loadingObj.text = progressStr\n            }\n        }\n    }\n}\n\nexport const updatePublic = {\n    computed: {\n        ...mapGetters([\n            'vehicleInfo',\n            'customerInfo'\n        ])\n    },\n    methods: {\n        ...mapActions([\n            'setCustomerInfo',\n            'setVehicleInfo'\n        ]),\n        getCarinfo(carInfo) {\n            return new Promise((resolve, reject) => {\n                fetch({\n                    url: api['getCarinfo'].url || '',\n                    method: 'post',\n                    data: {\n                        method: api['getCarinfo'].method,\n                        ...carInfo\n                    }\n                }).then(res => {\n                    resolve(res)\n                }).catch(error => {\n                    reject(error)\n                })\n            })\n        },\n        getUserInfo(userInfo, vehicle_code) {\n            let _this = this\n            return new Promise((resolve, reject) => {\n                fetch({\n                    url: api['getUserInfo'].url || '',\n                    method: 'post',\n                    data: {\n                        method: api['getUserInfo'].method,\n                        ...userInfo\n                    }\n                }).then(res => {\n                    this.setCustomerInfo(res[0]);\n                    if (vehicle_code) {\n                        // debugger\n                        this.getCarinfo({\n                            vehicle_code:  _this.vehicleInfo.vehicle_code,\n                            vehicle_color:  _this.vehicleInfo.vehicle_color,\n                            cpu_card_id: _this.vehicleInfo.cpu_card_id,\n                        }).then(carInfo => {\n                            if (carInfo.length > 0) {\n                                this.setVehicleInfo(carInfo[0]);\n                            }\n                        }, (error) => {\n                            this.$alert(error.message, '提示', {\n                                dangerouslyUseHTMLString: true,\n                                showClose: false,\n                                confirmButtonText: '确定',\n                                callback: action => {\n                                }\n                            });\n                        })\n\n                    } else {\n                        this.setVehicleInfo({})\n                    }\n\n                    resolve(res)\n                }).catch(error => {\n                    reject(error)\n                })\n            })\n        },\n        setPublicInfo(params, cb) {\n\n            if (!(params instanceof Object) || Object.keys(params).length == 0) return false;\n\n            if (params.vehicle_color || params.vehicle_code) {\n\n                this.getCarinfo(params).then(carInfo => {\n                    if (carInfo.length > 0) {\n                        this.setVehicleInfo(carInfo[0]);\n                        cb && cb();\n                    }\n                    this.getUserInfo({customer_id: carInfo[0].customer_id}).then(res => {\n                        if (res.length > 0) {\n                            this.setCustomerInfo(res[0]);\n                            cb && cb();\n                        }\n                    }, (error) => {\n                        this.$alert(error.message, '提示', {\n                            dangerouslyUseHTMLString: true,\n                            showClose: false,\n                            confirmButtonText: '确定',\n                            callback: action => {\n                            }\n                        });\n                    })\n\n                }, (error) => {\n                    this.$alert(error.message, '提示', {\n                        dangerouslyUseHTMLString: true,\n                        showClose: false,\n                        confirmButtonText: '确定',\n                        callback: action => {\n                        }\n                    });\n                })\n            }\n        }\n    }\n}\n"]}]}