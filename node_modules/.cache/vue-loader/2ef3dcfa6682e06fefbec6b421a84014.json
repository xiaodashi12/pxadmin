{"remainingRequest":"/Users/cjg/Vue/pxadmin/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!/Users/cjg/Vue/pxadmin/src/views/dashboard/manage/Overview.vue?vue&type=style&index=0&id=8eeaa644&scoped=true&lang=less&","dependencies":[{"path":"/Users/cjg/Vue/pxadmin/src/views/dashboard/manage/Overview.vue","mtime":1622368343190},{"path":"/Users/cjg/Vue/pxadmin/node_modules/_css-loader@1.0.1@css-loader/index.js","mtime":499162500000},{"path":"/Users/cjg/Vue/pxadmin/node_modules/_vue-loader@15.9.6@vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/cjg/Vue/pxadmin/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/cjg/Vue/pxadmin/node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js","mtime":1620475533881},{"path":"/Users/cjg/Vue/pxadmin/node_modules/_cache-loader@2.0.1@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cjg/Vue/pxadmin/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.custom-panel{\n  margin-top: 20px;\n}\n.dltbtn{\n  color: red;\n}\n.custom-tools__info{\n  color: rgba(16, 16, 16, 100);\n  font-size: 18px;\n  text-align: left;\n  margin-top: 10px;\n}\n.custom-tools__content{\n  background-color: #fff;\n  margin-top: 10px;\n  padding: 10px 20px;\n}\n.table-head{\n  display: flex;\n  margin-top: 10px;\n  justify-content: space-between;\n}\n.dialog_main {\n    display: flex;\n    flex-wrap: wrap;\n\n    .dialog_item {\n        width: 100%;\n        display: flex;\n        align-items: center;\n        margin-bottom: 10px;\n    }\n\n    .item_label {\n        min-width: 60px;\n    }\n}\n",{"version":3,"sources":["Overview.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"Overview.vue","sourceRoot":"src/views/dashboard/manage","sourcesContent":["<template>\n    <CustomLayout >\n    <div class=\"custom-body\">\n      <div>\n        <CommonTitle title=\"概览\"></CommonTitle>\n      </div>\n      <div class=\"custom-tools\">\n        <div class=\"table-head\">\n          <div class=\"custom-tools__info\">基础信息</div>\n          <el-button type=\"primary\" icon=\"el-icon-plus\" size=\"mini\"\n                     @click=\"handleChange\">修改</el-button>\n        </div>\n        \n        <div class=\"custom-tools__content\">\n          <el-form :model=\"form\"\n                 :inline=\"true\"\n                 @submit.native.prevent=\"\"\n                 class=\"table-form bg-gray\"\n                 label-width=\"130px\">\n          <el-row>\n            <el-form-item label=\"网关名称：\">\n              Pixiu\n              <!-- <el-input v-model=\"form.title\"\n                        clearable\n                        placeholder=\"请输入\"></el-input> -->\n            </el-form-item>\n            <el-form-item label=\"网关描述：\">\n              Pixiu\n              <!-- <el-input v-model=\"form.title\"\n                        clearable\n                        placeholder=\"请输入\"></el-input> -->\n            </el-form-item>\n          </el-row>\n        </el-form>\n        </div>\n      </div>\n      <div class=\"table-head\">\n        <div class=\"custom-tools__info\">映射服务</div>\n        <el-button type=\"primary\" icon=\"el-icon-plus\" size=\"mini\"\n                     @click=\"handleAdd\">新增</el-button>\n      </div>\n      <div class=\"custom-panel\">\n        <el-table v-loading=\"loading\"\n                  size=\"normal\"\n                  :data=\"tableData\"\n                  :empty-text=\"emptText\"\n                  row-class-name=\"custom-table-tr--hover\"\n                  header-row-class-name=\"custom-table-header\"\n                  @selection-change=\"handleSelectionChange\"\n                  style=\"width: 100%\">\n          <el-table-column \n                           prop=\"\"\n                           label=\"映射服务\">\n            \n          </el-table-column>\n          <el-table-column prop=\"path\"\n                           label=\"路径\">\n          </el-table-column>\n          <el-table-column \n                           prop=\"type\"\n                           label=\"类型\">\n          </el-table-column>\n          <el-table-column\n                           prop=\"description\"\n                           label=\"描述\">\n          </el-table-column>\n          <el-table-column\n                           label=\"操作\">\n            <template slot-scope=\"scope\">\n\n              <el-button type=\"text\"\n                         @click=\"handleLook(scope.row)\">查看</el-button>\n              <el-button type=\"text\" class=\"dltbtn\"\n                         @click=\"deleteRow(scope.row)\">删除</el-button>\n            </template>\n          </el-table-column>\n        </el-table>\n\n        <div class=\"custom-pagination\"\n             style=\"float:right\">\n          \n          <div style=\"display: flex;\">\n            <div>\n              总共<span>{{ pagination.total }}</span>条记录<i class=\"custom-pagination__interval\"></i>每页显示\n              <el-select v-model=\"pagination.pageSize\"\n                         placeholder=\"请选择\"\n                         style=\"width:70px;\">\n                <el-option v-for=\"item in pagination.pageSizes\"\n                           :key=\"item\"\n                           :label=\"item\"\n                           :value=\"item\">\n                </el-option>\n              </el-select>\n              条记录\n            </div>\n            <el-pagination :current-page.sync=\"pagination.pageIndex\"\n                           :page-size.sync=\"pagination.pageSize\"\n                           layout=\"prev, pager, next\"\n                           :total=\"pagination.total\">\n            </el-pagination>\n          </div>\n        </div>\n      </div>\n    </div>\n    <el-dialog\n                title=\"新增\"\n                :visible.sync=\"dialogVisible\"\n                v-if=\"dialogVisible\"\n                width=\"640px\"\n                :before-close=\"handleClose\">\n            <div class=\"dialog_main\">\n                <el-row :gutter=\"22\">\n                    <el-col :span=\"12\">\n                        <div class=\"dialog_item\">\n                            <div class=\"item_label\"> 路径：</div>\n                            <div class=\"item_value\" style=\"width:100%;\">\n                                <el-input\n                                        size=\"small\"\n                                        placeholder=\"路径\"\n                                        v-model=\"chooseRow.path\"\n                                        clearable>\n                                </el-input>\n                            </div>\n                        </div>\n                    </el-col>\n                    <el-col :span=\"12\">\n                        <div class=\"dialog_item\">\n                            <div class=\"item_label\">类型：</div>\n                            <div class=\"item_value\" style=\"width:100%;\">\n                                <el-input\n                                        size=\"small\"\n                                        placeholder=\"类型\"\n                                        v-model=\"chooseRow.type\"\n                                        clearable>\n                                </el-input>\n                            </div>\n                        </div>\n                    </el-col>\n                </el-row>\n                <el-row :gutter=\"22\">\n                    <el-col :span=\"12\">\n                        <div class=\"dialog_item\">\n                            <div class=\"item_label\"> 描述：</div>\n                            <div class=\"item_value\" style=\"width:100%;\">\n                                <el-input\n                                        size=\"small\"\n                                        placeholder=\"描述\"\n                                        v-model=\"chooseRow.description\"\n                                        clearable>\n                                </el-input>\n                            </div>\n                        </div>\n                    </el-col>\n                    <el-col :span=\"12\">\n                        <div class=\"dialog_item\">\n                            <div class=\"item_label\">超时：</div>\n                            <div class=\"item_value\" style=\"width:100%;\">\n                                <el-input\n                                        size=\"small\"\n                                        placeholder=\"超时\"\n                                        v-model=\"chooseRow.timeout\"\n                                        clearable>\n                                </el-input>\n                            </div>\n                        </div>\n                    </el-col>\n                </el-row>\n            </div>\n            <span slot=\"footer\" class=\"dialog-footer\">\n                <el-button size=\"mini\" @click=\"handleClose\">取 消</el-button>\n                <el-button type=\"primary\"  size=\"mini\" @click=\"makeSure\">确 定</el-button>\n            </span>\n        </el-dialog>\n  </CustomLayout>\n</template>\n\n<script>\nimport CommonTitle from '@/components/common/CommonTitle'\nimport CustomLayout from '@/components/common/CustomLayout.vue'\nexport default {\n  name: '',\n  components:{\n    CommonTitle,\n    CustomLayout\n  },\n  data () {\n    return {\n      form:{\n\n      },\n      dialogVisible:false,\n      chooseRow:{\n        timeout:'',\n        description:'',\n        type:'',\n        path:''\n      },\n      pagination: { // 分页字段\n        pageIndex: 1, // 当前页\n        pageSize: 20, // 每页显示多少条\n        total: 0, // 总条数\n        pageSizes: [20, 50, 100]\n      },\n      tableData: [], // table列表数据\n      loading: false,\n      tableHeight: window.document.documentElement.clientHeight - 248, // table高度\n      multipleSelection: [], // 多选时，已选项\n      currentRow: {}, // 当前选中行\n      areaDialogVisible: false, // 是否显示行政区划弹窗\n      emptText: '暂无数据', // table数据为空的提示语\n      isSizeInit: false, // 是否是页面初始化时设置的PageSize\n      previewDialogVisible: false, // 是否显示行政区划弹窗\n      currentTemplate: {},//当前选中的模板\n    }\n  },\n  created() {\n    //获取基础信息\n    this.init()\n    //获取 Resource 列表\n    this.getResourceList()\n    //获取 Resource 详情\n    this.getResourceDetail()\n  },\n  methods: {\n    handleClose() {\n      this.dialogVisible = false\n    },\n    getResourceDetail() {\n      this.$get('/config/api/resource/detail', {\n        resourceId: 1\n      })\n        .then((res) => {\n          if (res.code == 10001) {\n              let data = JSON.parse(res.data)\n              console.log(data)\n          } else {\n            \n          }\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n    //映射服务列表\n    getResourceList() {\n      this.$get('/config/api/resource/list')\n        .then((res) => {\n          if (res.code == 10001) {\n             this.tableData = JSON.parse(res.data)\n          } else {\n            \n          }\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n     //获取基础信息\n    init() {  \n      this.$get('/config/api/base')\n        .then((res) => {\n          if (res.code == 10001) {\n            //  console.log(JSON.parse(res.data))\n          } else {\n            \n          }\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n    handleSelectionChange(val) {\n      this.multipleSelection = val\n    },\n    //修改用户信息\n    handleChange() {\n      let formData = new FormData();\n      formData.append('name','pixiu');\n      formData.append('description','pixiu111');\n      this.$post('/config/api/base', formData)\n        .then((res) => {\n          if (res.code == 10001) {\n            console.log(res)\n          } else {\n            \n          }\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n    makeSure() {\n      let formData = new FormData();\n      formData.append('path', this.chooseRow.path);\n      formData.append('type', this.chooseRow.type);\n      formData.append('description', this.chooseRow.description);\n      formData.append('timeout', this.chooseRow.timeout);\n      let obj = {\n        pre:{\n          pluginNames:['rate limit', 'access']\n        },\n        post:{\n          groupNames:['group2']\n        }\n          \n      }\n      formData.append('plugins', JSON.stringify(obj));\n      let mobj = []\n      formData.append('methods', null);\n      this.$post('/config/api/resource', formData)\n        .then((res) => {\n          if (res.code == 10001) {\n            this.dialogVisible = false\n            this.getResourceList()\n            console.log(res)\n          } else {\n            \n          }\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n    //删除\n    deleteRow() {\n      this.$post('/config/api/resource', {\n        resourceId: 2\n      })\n        .then((res) => {\n          if (res.code == 10001) {\n            this.$message({\n              type: 'success',\n              message: '删除成功！',\n            })\n            this.getResourceList()\n            console.log(res)\n          } else {\n            \n          }\n        })\n        .catch((err) => {\n          console.log(err)\n        })\n    },\n    //新增\n    handleAdd() {\n      this.dialogVisible = true\n      \n    }\n  }\n}\n</script>\n\n\n<style scoped lang=\"less\">\n.custom-panel{\n  margin-top: 20px;\n}\n.dltbtn{\n  color: red;\n}\n.custom-tools__info{\n  color: rgba(16, 16, 16, 100);\n  font-size: 18px;\n  text-align: left;\n  margin-top: 10px;\n}\n.custom-tools__content{\n  background-color: #fff;\n  margin-top: 10px;\n  padding: 10px 20px;\n}\n.table-head{\n  display: flex;\n  margin-top: 10px;\n  justify-content: space-between;\n}\n.dialog_main {\n    display: flex;\n    flex-wrap: wrap;\n\n    .dialog_item {\n        width: 100%;\n        display: flex;\n        align-items: center;\n        margin-bottom: 10px;\n    }\n\n    .item_label {\n        min-width: 60px;\n    }\n}\n</style>\n"]}]}